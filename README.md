# Overview

Welcome to the analysis of the 2022 and 2023 global mart sales dataset, the project aims to answer possible and important questions, that helps to get an improve view of the actual global mart.

The dataset sourced from [Retail Orders](https://www.kaggle.com/datasets/ankitbansal06/retail-orders), wich provide 2022 and 2023 global mart sales dataset.

# The Questions

Below are the questions that i wanted to answer in my project:

1. What are the top 10 highest revenue generating products?
2. What are top 5 highest selling products in each region?
3. What was month over month growth comparison for 2022 and 2023 sales?
4. For each category which month had highest sales?
5. What was the growth percentage for each sub category from 2022 to 2023?
6. What was the top 5 states with highest profit in 2022 and 2023?

# Tools I Used

- Python: The basis of the analysis, letting me to explore, filter and find every insight, combined with some libraries, like:
  - Pandas Library: To analyse the data.
  - Matplotlib: To show the data in plots.
  - Seaborn: To more personalization in plots.
- Jupyter Notebooks: To run the Python scripts.
- Visual Studio Code: The IDE for executing the scripts.
- Git and Github: To control and share the Python code.

# The Analysis

## 1. What are the top 10 highest revenue generating products?

Grouping them by product id and calculating the sum of the sale price is enough to know the answer, and sorting the top 10 we get:

```python
top_revenue = df.groupby("product_id")["sale_price"].sum().nlargest(10) # nlargest(10) is used to get top 10 values

# Plot top 10 highest revenue generating products

sns.barplot(
    x=top_revenue.values,
    y=top_revenue.index,
    hue=top_revenue.index,
    palette="Oranges_r",
)

plt.xlabel("Revenue")
plt.ylabel("Product ID")
plt.title("Top 10 Highest Revenue Generating Products")
plt.xticks([])
plt.xlim(0, top_revenue.values[0] * 1.2)

for i in range(len(top_revenue)):
    plt.text(top_revenue.iloc[i], i, f"${top_revenue.iloc[i]:,.2f}".replace(".00", ""), ha="left", va="center")

plt.show()
```

## Results

![Visualization of the top 10 highest revenue generating products](/visualizations/top_products_revenue.png)

## Insights

- The chart reveals a significant gap between the head to the rest. This suggest that a small number of products contribute disproportionately to the overall revenue.

- The revenue generated by the products decreases rapidly after the top few, indicating a long tail distribution.

- The "OFF-" category is dominant in the chart, that means that the Office category contribute significantly in the sales.

## 2. What are top 5 highest selling products in each region?

Grouping the data by region and product id and calculating the sum of the sale prices, we can get the region sales, then i sorted by the top 5:

```python
region_sales = df.groupby(["region", "product_id"])["sale_price"].sum()

top_region_sales = region_sales.groupby("region").nlargest(5)

# Plot top 5 highest selling products in each region

fig, axes = plt.subplots(2, 2, figsize=(15, 10))
color_palettes = ["Blues_r", "Greens_r", "Reds_r", "Oranges_r"]

for i, (region, sales) in enumerate(top_region_sales.groupby("region")):
    ax = axes[i // 2, i % 2]
    sns.barplot(
        x=sales.values,
        y=sales.index.get_level_values("product_id"),
        hue=sales.index.get_level_values("product_id"),
        ax=ax,
        palette=color_palettes[i],
        legend=False,
    )
    ax.set_title(region)
    ax.set_xlabel("Revenue")
    ax.set_ylabel("Product ID")
    ax.set_xlim(0, sales.values[0] * 1.2)
    ax.set_xticks([])

    for j in range(len(sales)):
        ax.text(sales.iloc[j], j, f"${sales.iloc[j]:,.2f}".replace(".00", ""), ha="left", va="center")

fig.subplots_adjust(hspace=0.5)
plt.tight_layout()
plt.show()
```

## Results

![Visualization of top 5 highest selling products in each region](/visualizations/top_products_revenue_by_region.png)

## Insights

- The East central has the highest-revenue generating product.
- The TEC category appear to be the top performers in terms of revenue, especially in the Central and East regions.
- The South and West regions have a more even distribution of revenue among the top 10 products.

## 3. What was month over month growth comparison for 2022 and 2023 sales?

Splitting the year and the month of the order date, and grouping it by them, i can calculated the sum of sales prices in each month obtaining a versus for each year

```python
df["year"] = df["order_date"].dt.year
df["month"] = df["order_date"].dt.month

month_over_month = df.groupby(["year", "month"])["sale_price"].sum().unstack("year")

# Plot month over month growth comparison for 2022 and 2023 sales

sns.lineplot(data=month_over_month, marker="o", palette="tab10", linewidth=2.5)

plt.xlabel("Month")
plt.ylabel("")
plt.title("Month Over Month Growth Comparison for 2022 and 2023 Sales")
plt.legend(title="Year")
plt.grid(axis="y")
plt.xticks(range(1, 13))

plt.gca().get_yaxis().set_major_formatter(plt.FuncFormatter(lambda x, loc: f"${x:,.0f}"))

plt.tight_layout()
plt.show()
```

## Results

![Visualization of the month over month comparison](/visualizations/month_over_month.png)

## Insights

- In 2022 sales experienced a general upward trend throughout the year, with some fluctuations.
- 2022 was a stable year with a general positive month-over-month, the most notable growth occurred at mid-year.
- In 2023 sales started lower than in 2022 but showed a strong increase in the initial months. However, there was a significant dip around mid-year before rebounding towards the end of the year.
- October is in generally, a good month for sales.

## 4. For each category which month had highest sales?

```python
category_best_sales = (
    df.groupby(["category", "order_date"])["sale_price"]
    .sum()
    .reset_index()
    .sort_values("sale_price", ascending=False)
    .drop_duplicates("category")
)

# Plot for each category which month had highest sales

sns.barplot(data=category_best_sales, x="order_date", y="sale_price", hue="category", palette="tab10", width=0.5)

plt.xlabel("Date")
plt.ylabel("")
plt.title("For Each Category Which Month Had Highest Sales")

plt.gca().get_yaxis().set_major_formatter(plt.FuncFormatter(lambda x, loc: f"${x:,.0f}"))

plt.legend(title="Category")
plt.tight_layout()
plt.show()
```

## Results

![Visualization of the category sales](/visualizations/category_best_sales.png)

## Insights

- The Technology is the best selling category, with a huge gap between the others.
- With this chart, we can confirm that the October month is the best month to sales.
- February is a good month to office sub categories.

## 5. What was the growth percentage for each sub category from 2022 to 2023?

Similar to the 4th question, with the difference of taking the growth of each sub category and adding the growth percentage.

```python
sub_category_df = df.groupby(["year", "sub_category"])["profit"].sum().unstack("year")

sub_category_df["growth_perc"] = (
    (sub_category_df[2023] - sub_category_df[2022]) / sub_category_df[2022] * 100
).round(2)

# Plot growth percentage for each sub category from 2022 to 2023

sns.barplot(data=sub_category_df, x="growth_perc", y=sub_category_df.index, hue=sub_category_df.index, palette="magma")

plt.xlabel("Growth Percentage")
plt.ylabel("")
plt.title("Growth Percentage for Each Sub Category from 2022 to 2023")

plt.gca().get_xaxis().set_major_formatter(plt.FuncFormatter(lambda x, loc: f"{x:,.0f}%"))

plt.show()
```

## Results

![Visualization of growth percentage in sub category](/visualizations/growth_perc.png)

## Insights

- There are several sub-categories with significant growth, such as Machines, Supplies, and Storage.
- On the other hand, some sub-categories experienced declines, including Fasteners, Envelopes, and Copiers.
- The Machines sub-category had the highest growth percentage, indicating a strong increase in sales or demand from 2022 to 2023.
- The Supplies and Storage had a substantial growth, indicating that the demand for office supplies was highest too.

## 6. What was the top 5 states with highest profit in 2022 and 2023?

To obtain the answer, i grouped by year and state, taking the sum of the profit, and then stacking again to obtain the two sums for each state (2022 and 2023).

```python
state_profits = (
    df.groupby(["year", "state"])["profit"]
    .sum()
    .unstack("year")
    .sort_values(2023, ascending=False)
    .head(5)
)

state_profits_pivoted = state_profits.stack().reset_index(
    name="profit"
)  # i need to convert it to long format to plot (two bars for each state)

# Plot the the top 5 states with highest profit in 2022 and 2023

plt.figure(figsize=(10, 6))
sns.barplot(data=state_profits_pivoted, x="profit", y="state", hue="year")

plt.xlabel("Profit")
plt.ylabel("")
plt.title("Top 5 States with Highest Profit in 2022 and 2023")
plt.legend(title="Year")
plt.gca().get_xaxis().set_major_formatter(plt.FuncFormatter(lambda x, loc: f"${x:,.0f}"))
plt.show()
```

## Results

![Visualization of the state with best profits](/visualizations/best_state_profits.png)

## Insights

- California had the best profits over the years, but was the only state that the 2022 profits were highest than 2023.
- Florida had a considerable profit growth in 2023.
- The other States met the requirement of having profit growth in 2023.

# What I learned

In the journey of doing this analysis, i learned more of python and specially its library pandas, because to answer the questions, i had to do complex (for my level) queries.

# Challenges I Faced

- More Complex Plotting: To the second point, i had to plot 4 different charts in the same figure, so i had to use more python code, like loops.

# Conclusions

This project showed a general example of global mart sales, in generally, shows a continuos expansion in sales, with the Technology category on head, this is because how it works the actual world, with an excessive growth of technology in-self. Understanding this, we can have a very good idea of how invest for a new company.